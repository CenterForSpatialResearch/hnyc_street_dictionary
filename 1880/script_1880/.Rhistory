x<-gsub("\\<7TH\\>|\\b7\\b","7",x)
x<-gsub("\\<8TH\\>|\\b8\\b","8",x)
x<-gsub("\\<9TH\\>|\\b9\\b","9",x)
#new
x<-gsub("\\<TENTH\\>|\\<10TH\\>|\\b10\\b","10",x)
x<-gsub("\\<ELEVENTH\\>|\\<11TH\\>|\\b11\\b","11",x)
x<-gsub("\\<TWELFTH\\>|\\<12TH\\>|\\b12\\b","12",x)
x<-gsub("\\<THIRTEENTH\\>|\\<13TH\\>|\\b13\\b","13",x)
x<-gsub("\\<FORTEENTH\\>|\\<14TH\\>|\\b14\\b","14",x)
x<-gsub("\\<FIFTEENTH\\>|\\<15TH\\>|\\b15\\b","15",x)
x<-gsub("\\<SIXTEENTH\\>|\\<16TH\\>|\\b16\\b","16",x)
x<-gsub("\\<SEVENTEENTH\\>|\\<17TH\\>|\\b17\\b","17",x)
x<-gsub("\\<EIGHTEENTH\\>|\\<18TH\\>|\\b18\\b","18",x)
x<-gsub("\\<NINETEENTH\\>|\\<19TH\\>|\\b19\\b","19",x)
x<-gsub("\\<TWENTY\\>|\\<TWENTI\\>|\\<TENTI\\>","2",x)
x<-gsub("\\<THIRTY\\>|\\<THIRTHY\\>|\\<THIRTEY\\>|\\<TIRTY\\>|\\<TRITHY\\>","3",x)
x<-gsub("\\<FORTY\\>|\\<FOURTY\\>|\\<FOURTHY\\>|\\<FRTY\\>","4",x)
x<-gsub("\\<FIFTY\\>|\\<FIFTEY\\>|\\<FIFT\\>|\\<FITY\\>|\\<FIFTHY\\>","5",x)
x<-gsub("\\<SIXTY\\>|\\<SXTY\\>|\\<SIXY\\>|\\<SXTY\\>|\\<SIXTHY\\>|\\<SIXTEY\\>","6",x)
x<-gsub("\\<SEVENT\\>|\\<SEVENTY\\>|\\<SEVENTEY\\>|\\<SVENTY\\>|\\<SEVENTI\\>","7",x)
x<-gsub("\\<EIGHTY\\>|\\<EIGHTEY\\>|\\<EIGHTE\\>","8",x)
x<-gsub("\\<UNITY\\>|\\<NINTH\\>|\\<NINETY\\>|\\<NINETEY\\>|\\<NINETIETH\\>|\\<NINTY\\>","9",x)
x<-gsub("\\<FRIST\\>|\\<FIST\\>|\\<FRST\\>|\\<FIRST\\>|\\<ONE\\>","1",x)
x<-gsub("\\<SECOND\\>|\\<SECORD\\>|\\<SCOND\\>|\\<SECOND\\>|\\<TWO\\>","2",x)
x<-gsub("\\<THRID\\>|\\<THIRD\\>|\\<TIRD\\>|\\<TRIHD\\>|\\<THREE\\>","3",x)
x<-gsub("\\<FORTH\\>|\\<FOURTH\\>|\\<FROTH\\>|\\<FROUTH\\>|\\<FOUR\\>","4",x)
x<-gsub("\\<FIFETH\\>|\\<FIFTH\\>|\\<FIFFTH\\>|\\<FIFTHE\\>|\\<FIVE\\>","5",x)
x<-gsub("\\<SIXTH\\>|\\<SXTH\\>|\\<SITH\\>|\\<SIHXT\\>|\\<SIX\\>","6",x)
x<-gsub("\\<SEVENTH\\>|\\<SVEN\\>|\\<SVENTH\\>|\\<SEVENH\\>|\\<SEVENT\\>|\\<SEVEN\\>","7",x)
x<-gsub("\\<EIGHTH\\>|\\<EIGHTEH\\>|\\<EITH\\>|\\<EIGHT\\>","8",x)
x<-gsub("\\<NINETH\\>|\\<NINTH\\>|\\<NINT\\>|\\<NINETH\\>|\\<NINE\\>|\\<NIN\\>","9",x)
x<-gsub("\\<TWENTIETH\\>|\\<TWENTIEFTH\\>","20",x)
x<-gsub("\\<THIRTIETH\\>|\\<THIRTIEFTH\\>","30",x)
x<-gsub("\\<FORTIETH\\>|\\<FOURTIETH\\>","40",x)
x<-gsub("\\<FIFTIETH\\>","50",x)
x<-gsub("\\<SIXTIETH\\>","60",x)
x<-gsub("\\<SEVENTIETH\\>","70",x)
x<-gsub("\\<EIGHTIETH\\>","80",x)
x<-gsub("\\<NINETIETH\\>|\\<NINTIETH\\>","90",x)
x<-gsub("(?<=\\d) (?=\\d)","",x,perl = T)
x<-gsub("^\\bST\\b","SAINT", x)
x<-gsub("\\bHOUSE\\b","", x)
x<-gsub("\\bHOSTEL\\b","", x)
x<-gsub("\\bHOTEL\\b","", x)
x<-gsub("\\bLODGE\\b","", x)
x<-gsub("\\bLODGING\\b","", x)
x<-trimws(x, "both")
## overall spacing problem extra white space
x <- gsub("((\\w+|\\d+)\\s\\s(\\w+|\\d+))", "\\2 \\3", x)
x <- gsub("((\\w+|\\d+)\\s\\s\\s(\\w+|\\d+))", "\\2 \\3", x)
## 4 W to W 4
x <- gsub("(\\w+|\\d+)\\s(\\bN\\b|\\bW\\b|\\bS\\b|\\bE\\b)", "\\3\\2 \\1", x)
## AVE D
x <- gsub("(\\b[A-Z])\\s(AVE)", "\\3\\2 \\1", x)
}
# load data
morse_mn1910<-read_csv("Data/MN_MORSE_EDstreet_dict_1910.csv")
# load data
morse_mn1910<-read_csv("Data/MN_MORSE_EDstreet_dict_1910.csv")
morse_bk1910<-read_csv("Data/BK_MORSE_EDstreet_dict_1910.csv")
morse_mn1910<-as.data.frame(sapply(morse_mn1910, toupper))
morse_bk1910<-as.data.frame(sapply(morse_bk1910, toupper))
morse_mn1910$ED<-as.numeric(as.character(morse_mn1910$ED))
morse_bk1910$ED<-as.numeric(as.character(morse_bk1910$ED))
# load clean function
source("lib/clean_function.R")
# clean strings separately
morse_mn1910[ , -1] <- apply(morse_mn1910[ , -1], 2, clean)
colnames(morse_mn1910) <- gsub("V", "Street", colnames(morse_mn1910))
write_csv(morse_mn1910, "Data/morse_mn1910.csv")
write_csv(morse_bk1910, "Data/morse_bk1910.csv")
# load data
morse_mn1880<-read_csv("Data/MN_MORSE_EDstreet_dict_1880.csv")
morse_bk1880<-read_csv("Data/BK_MORSE_EDstreet_dict_1880.csv")
morse_mn1880<-as.data.frame(sapply(morse_mn1880, toupper))
morse_bk1880<-as.data.frame(sapply(morse_bk1880, toupper))
morse_mn1880$ED<-as.numeric(as.character(morse_mn1880$ED))
morse_bk1880$ED<-as.numeric(as.character(morse_bk1880$ED))
# load clean function
source("lib/clean_function.R")
# clean strings separately
morse_mn1880[ , -1] <- apply(morse_mn1880[ , -1], 2, clean)
colnames(morse_mn1880) <- gsub("V", "Street", colnames(morse_mn1880))
morse_bk1880[ , -1] <- apply(morse_bk1880[ , -1], 2, clean)
colnames(morse_bk1880) <- gsub("V", "Street", colnames(morse_bk1880))
write_csv(morse_mn1880, "Data/morse_mn1880.csv")
write_csv(morse_bk1880, "Data/morse_bk1880.csv")
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
morse_mn <- read_csv("Data/morse_mn1880.csv")
morse_bk <- read_csv("Data/morse_bk1880.csv")
mn_geo <- read_csv("Data/geo_dict_mn.csv")
bk_geo <- read_csv("Data/geo_dict_bk.csv")
colnames(morse_mn) <- paste0("St", 0:(ncol(morse_mn)-1), sep = "")
colnames(morse_mn)[1] <- "ED"
morse_mn_list<-gather(data = morse_mn,
key = item,
value = value,
St1:St35)%>%
select(-item)
morse_mn_list<-na.omit(morse_mn_list)
colnames(morse_mn_list)[2]<-"street"
morse_mn_list$source<-"morse"
morse_mn_list$street<-trimws(morse_mn_list$street,"both")
colnames(morse_bk) <- paste0("St", 0:(ncol(morse_bk)-1), sep = "")
colnames(morse_bk)[1] <- "ED"
morse_bk_list<-gather(data = morse_bk,
key = item,
value = value,
St1:St72)%>%
select(-item)
colnames(morse_mn) <- paste0("St", 0:(ncol(morse_mn)-1), sep = "")
colnames(morse_mn)[1] <- "ED"
morse_mn_list<-gather(data = morse_mn,
key = item,
value = value,
St1:St55)%>% #columns
select(-item)
morse_mn_list<-na.omit(morse_mn_list)
colnames(morse_mn_list)[2]<-"street"
morse_mn_list$source<-"morse"
morse_mn_list$street<-trimws(morse_mn_list$street,"both")
colnames(morse_bk) <- paste0("St", 0:(ncol(morse_bk)-1), sep = "")
colnames(morse_bk)[1] <- "ED"
morse_bk_list<-gather(data = morse_bk,
key = item,
value = value,
St1:St59)%>% #columns
select(-item)
morse_bk_list<-na.omit(morse_bk_list)
colnames(morse_bk_list)[2]<-"street"
morse_bk_list$source<-"morse"
morse_bk_list$street<-trimws(morse_bk_list$street,"both")
colnames(mn_geo) <- paste0("St", 0:(ncol(mn_geo)-1), sep = "")
colnames(mn_geo)[1] <- "ED"
mn_geo_list<-gather(data = mn_geo,
key = item,
value = value,
St1:St27)%>%
select(-item)
mn_geo_list<-na.omit(mn_geo_list)
colnames(mn_geo_list)[2]<-"street"
mn_geo_list$source<-"morse"
mn_geo_list$street<-trimws(mn_geo_list$street,"both")
colnames(bk_geo) <- paste0("St", 0:(ncol(bk_geo)-1), sep = "")
colnames(bk_geo)[1] <- "ED"
bk_geo_list<-gather(data = bk_geo,
key = item,
value = value,
St1:St58)%>%
select(-item)
bk_geo_list<-na.omit(bk_geo_list)
colnames(bk_geo_list)[2]<-"street"
bk_geo_list$source<-"morse"
bk_geo_list$street<-trimws(bk_geo_list$street,"both")
#left join
missing_MN <- left_join(morse_mn_list, mn_geo_list, by = c("ED","street"))
missing_geo_mn <- missing_MN %>%
filter(is.na(source.y) == TRUE) %>%
select(-c(source.x, source.y))
#left join
missing_BK <- left_join(morse_bk_list, bk_geo_list, by = c("ED","street"))
missing_geo_bk <- missing_BK %>%
filter(is.na(source.y) == TRUE) %>%
select(-c(source.x, source.y))
write_csv(missing_geo_mn, "Data/missing_EDs_mn.csv")
write_csv(missing_geo_bk, "Data/missing_EDs_bk.csv")
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
morse_mn <- read_csv("Data/morse_mn1880.csv")
morse_bk <- read_csv("Data/morse_bk1880.csv")
mn_geo <- read_csv("Data/geo_dict_mn.csv")
bk_geo <- read_csv("Data/geo_dict_bk.csv")
full_mn_dict <- full_join(morse_mn, mn_geo, by = "ED")
full_bk_dict <- full_join(morse_bk, bk_geo, by = "ED")
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St32) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- full_join(morse_mn, mn_geo, by = "ED")
full_bk_dict <- full_join(morse_bk, bk_geo, by = "ED")
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St55) %>%
select(-item) %>% group_by(ED) %>% ungroup()
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
morse_mn <- read_csv("Data/morse_mn1910.csv")
# load data
morse_mn1910<-read_csv("Data/MN_MORSE_EDstreet_dict_1910.csv")
# load data
morse_mn1910<-read_csv("Data/MN_MORSE_EDstreet_dict_1910.csv")
# load data
morse_mn1910<-read_csv("Data/MN_MORSE_EDstreet_dict_1910.csv")
morse_bk1910<-read_csv("Data/BK_MORSE_EDstreet_dict_1910.csv")
morse_mn1910<-as.data.frame(sapply(morse_mn1910, toupper))
morse_bk1910<-as.data.frame(sapply(morse_bk1910, toupper))
morse_mn1910$ED<-as.numeric(as.character(morse_mn1910$ED))
morse_bk1910$ED<-as.numeric(as.character(morse_bk1910$ED))
# load clean function
source("lib/clean_function.R")
# clean strings separately
morse_mn1910[ , -1] <- apply(morse_mn1910[ , -1], 2, clean)
colnames(morse_mn1910) <- gsub("V", "Street", colnames(morse_mn1910))
morse_bk1910[ , -1] <- apply(morse_bk1910[ , -1], 2, clean)
colnames(morse_bk1910) <- gsub("V", "Street", colnames(morse_bk1910))
write_csv(morse_mn1910, "Data/morse_mn1910.csv")
write_csv(morse_bk1910, "Data/morse_bk1910.csv")
morse_mn <- read_csv("Data/morse_mn1910.csv")
morse_bk <- read_csv("Data/morse_bk1910.csv")
mn_geo <- read_csv("Data/geo_dict_mn.csv")
bk_geo <- read_csv("Data/geo_dict_bk.csv")
full_mn_dict <- full_join(morse_mn, mn_geo, by = "ED")
full_bk_dict <- full_join(morse_bk, bk_geo, by = "ED")
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St32) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, St1:St32) %>%
select(-item) %>% group_by(ED) %>% ungroup()
head(full_mn_dict)
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St30) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- na.omit(full_mn_dict)
colnames(full_mn_dict)[2] = "streets"
full_mn_dict <- full_mn_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
colnames(full_mn_dict)[1]="ED"
full_mn_dict <- full_mn_dict[mixedorder(colnames(full_mn_dict))]
full_mn_dict <- full_mn_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St30) %>%
select(-item) %>% group_by(ED) %>% ungroup()
head(full_mn_dict)
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St30) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- full_join(morse_mn, mn_geo, by = "ED")
full_bk_dict <- full_join(morse_bk, bk_geo, by = "ED")
head(full_mn_dict)
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St30) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- na.omit(full_mn_dict)
colnames(full_mn_dict)[2] = "streets"
full_mn_dict <- full_mn_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
colnames(full_mn_dict)[1]="ED"
full_mn_dict <- full_mn_dict[mixedorder(colnames(full_mn_dict))]
full_bk_dict <- gather(data = full_bk_dict, key = item,
value = value, Street1:St77) %>%
select(-item) %>% group_by(ED) %>% ungroup()
head(full_bk_dict)
full_bk_dict <- gather(data = full_bk_dict, key = item,
value = value, Street1:St76) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_bk_dict <- na.omit(full_bk_dict)
colnames(full_bk_dict)[2] = "streets"
full_bk_dict <- full_bk_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
colnames(full_bk_dict)[1]="ED"
full_bk_dict <- full_bk_dict[mixedorder(colnames(full_bk_dict))]
write_csv(full_mn_dict, "Data/full_mn_dict.csv")
write_csv(full_bk_dict, "Data/full_bk_dict.csv")
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
mn <- read_csv("Data/combine_mn.csv")
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
morse_mn <- read_csv("Data/morse_mn1910.csv")
morse_bk <- read_csv("Data/morse_bk1910.csv")
mn_seg <- read_csv("Data/segment_mn.csv")
mn_seg <- read_csv("Data/segment_mn.csv")
morse_mn <- read_csv("Data/morse_mn1910.csv")
morse_bk <- read_csv("Data/morse_bk1910.csv")
mn_seg <- read_csv("Data/segment_mn.csv")
bk_seg <- read_csv("Data/segment_bk.csv")
## MN
colnames(morse_mn) <- gsub("Street", "St", colnames(morse_mn))
test <- morse_mn
test1 = test %>%
gather(colnames(test)[-1], key = "StreetNum", value = "StreetName")
mn_ed <- na.omit(test1) %>% select(ED, Name = StreetName)
## BK
colnames(morse_bk) <- gsub("Street", "St", colnames(morse_bk))
test <- morse_bk
test1 = test %>%
gather(colnames(test)[-1], key = "StreetNum", value = "StreetName")
bk_ed <- na.omit(test1) %>% select(ED, Name = StreetName)
mn_ed$source <- "Morse"
bk_ed$source <- "Morse"
mn_seg1 <- mn_seg %>% filter(ED_Minus == ED_Plus) %>%
mutate(ED = ED_Minus) %>% select(-ED_Minus, -ED_Plus)
mn_seg1 <- mn_seg %>% filter(ED_Minus == ED_Plus) %>%
mutate(ED = ED_Minus) %>% select(-ED_Minus, -ED_Plus)
#
head(mn_seg)
mn_seg1 <- mn_seg %>% filter(ED_Minus == ED_Plus) %>%
mutate(ED = ED_Minus) %>% select(-ED_Minus, -ED_Plus)
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
morse_mn <- read_csv("Data/morse_mn1880.csv")
morse_bk <- read_csv("Data/morse_bk1880.csv")
mn_geo <- read_csv("Data/geo_dict_mn.csv")
bk_geo <- read_csv("Data/geo_dict_bk.csv")
full_mn_dict <- full_join(morse_mn, mn_geo, by = "ED")
full_bk_dict <- full_join(morse_bk, bk_geo, by = "ED")
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St32) %>%
select(-item) %>% group_by(ED) %>% ungroup()
head(full_mn_dict)
full_mn_dict <- gather(data = full_mn_dict, key = item,
value = value, Street1:St30) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_mn_dict <- na.omit(full_mn_dict)
colnames(full_mn_dict)[2] = "streets"
full_mn_dict <- full_mn_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
colnames(full_mn_dict)[1]="ED"
full_mn_dict <- full_mn_dict[mixedorder(colnames(full_mn_dict))]
full_bk_dict <- gather(data = full_bk_dict, key = item,
value = value, Street1:St77) %>%
select(-item) %>% group_by(ED) %>% ungroup()
head(full_bk_dict)
full_bk_dict <- gather(data = full_bk_dict, key = item,
value = value, Street1:St76) %>%
select(-item) %>% group_by(ED) %>% ungroup()
full_bk_dict <- na.omit(full_bk_dict)
colnames(full_bk_dict)[2] = "streets"
full_bk_dict <- full_bk_dict %>%
dplyr::arrange(streets) %>%
melt(., id.vars = c("streets"), variable.name = "ED") %>%
select(-c(ED)) %>%
distinct(streets, value) %>%
dplyr::group_by(value) %>%
dplyr::mutate(rn = paste0("Street", 1:n())) %>%
tidyr::spread(rn, streets)
colnames(full_bk_dict)[1]="ED"
full_bk_dict <- full_bk_dict[mixedorder(colnames(full_bk_dict))]
write_csv(full_mn_dict, "Data/full_mn_dict.csv")
write_csv(full_bk_dict, "Data/full_bk_dict.csv")
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(cache = F)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
options(mc.cores = parallel::detectCores())
library(zoo)
library(magrittr)
library(dplyr)
library(tidyverse)
library(openxlsx)
library(readxl)
library(stringr)
library(fuzzyjoin)
library(tm)
library(english)
library(reshape2)
library(gtools)
library(compare)
library(purrr)
mn_seg <- read_csv("Data/mn_segments_1880export.csv")
